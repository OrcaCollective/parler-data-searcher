<script>
function resetPageNumber() {
    const [, searchType, searchTerm] = window.location.pathname.split("/")
    const form = document.getElementById("search-form")
    if (form.search_type.value !== searchType || form.search_term.value !== searchTerm) {
        form.page.value = 0;
    }
}
</script>
<form action="/" class="search-form" id="search-form" onsubmit="resetPageNumber();" autocomplete="off">
    <label>
        Search type:
        <select class="entity-input" name="search_type">
            <option
                value="users"
                {% if search_type == "users" %}selected="true"{% endif %}
            >
                Users
            </option>
            <option
                value="posts"
                {% if search_type == "posts" %}selected="true"{% endif %}
            >
                Posts
            </option>
        </select>
    </label>

    <label>
        Search term:
        <input class="entity-input" type="text" placeholder="Search term" name="search_term" value="{{ search_term }}" />
    </label>

    {% if page_count %}
        <label>
            Page:
            <select class="entity-input" name="page">
                {% for i in range(page_count) %}
                    <option value="{{ i }}" {% if i == page %}selected="true"{% endif %}>{{ i }}</option>
                {% endfor %}
            </select>
        </label>
    {% endif %}

    <button type="submit">Open your eyes</button>
</form>
